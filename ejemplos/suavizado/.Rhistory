name = 'LOWESS 1/5', mode = 'lines'
) %>%
add_trace(
y = ~lowess(CASOS, f = 1/10),
name = 'LOWESS 1/10', mode = 'lines'
) %>%
add_trace(
y = ~lowess(CASOS, f = 1/10),
name = 'LOWESS 1/20', mode = 'lines'
)
a <- forecast::ses(confirmados$CASOS)
plot_ly(
data = confirmados, x = ~Fecha
) %>%
add_trace(
y = ~CASOS,
name = 'Reales', mode = 'markers'
) %>%
add_trace(
y = ~lowess(CASOS, f = 3),
name = 'LOWESS 1/5', mode = 'lines'
) %>%
add_trace(
y = ~lowess(CASOS, f = 7),
name = 'LOWESS 1/10', mode = 'lines'
) %>%
add_trace(
y = ~lowess(CASOS, f = 14),
name = 'LOWESS 1/20', mode = 'lines'
)
a <- forecast::ses(confirmados$CASOS)
plot_ly(
data = confirmados, x = ~Fecha
) %>%
add_trace(
y = ~CASOS,
name = 'Reales', mode = 'markers'
) %>%
add_trace(
y = ~lowess(CASOS, f = 1/30),
name = 'LOWESS 1/5', mode = 'lines'
) %>%
add_trace(
y = ~lowess(CASOS, f = 7),
name = 'LOWESS 1/10', mode = 'lines'
) %>%
add_trace(
y = ~lowess(CASOS, f = 14),
name = 'LOWESS 1/20', mode = 'lines'
)
a <- forecast::ses(confirmados$CASOS)
plot_ly(
data = confirmados, x = ~Fecha
) %>%
add_trace(
y = ~CASOS,
name = 'Reales', mode = 'markers'
) %>%
add_trace(
y = ~lowess(CASOS, f = 1/30000),
name = 'LOWESS 1/5', mode = 'lines'
) %>%
add_trace(
y = ~lowess(CASOS, f = 7),
name = 'LOWESS 1/10', mode = 'lines'
) %>%
add_trace(
y = ~lowess(CASOS, f = 14),
name = 'LOWESS 1/20', mode = 'lines'
)
a <- forecast::ses(confirmados$CASOS)
plot_ly(
data = confirmados, x = ~Fecha
) %>%
add_trace(
y = ~CASOS,
name = 'Reales', mode = 'markers'
) %>%
add_trace(
y = ~lowess(CASOS),
name = 'LOWESS 1/5', mode = 'lines'
) %>%
add_trace(
y = ~lowess(CASOS, f = 7),
name = 'LOWESS 1/10', mode = 'lines'
) %>%
add_trace(
y = ~lowess(CASOS, f = 14),
name = 'LOWESS 1/20', mode = 'lines'
)
a <- forecast::ses(confirmados$CASOS)
plot_ly(
data = confirmados, x = ~Fecha
) %>%
add_trace(
y = ~CASOS,
name = 'Reales', mode = 'markers'
) %>%
add_trace(
y = ~loess(CASOS),
name = 'LOWESS 1/5', mode = 'lines'
) %>%
add_trace(
y = ~lowess(CASOS, f = 7),
name = 'LOWESS 1/10', mode = 'lines'
) %>%
add_trace(
y = ~lowess(CASOS, f = 14),
name = 'LOWESS 1/20', mode = 'lines'
)
a <- forecast::ses(confirmados$CASOS)
plot_ly(
data = confirmados, x = ~Fecha
) %>%
add_trace(
y = ~CASOS,
name = 'Reales', mode = 'markers'
) %>%
add_trace(
y = ~loess(CASOS ~ Fecha, CASOS),
name = 'LOWESS 1/5', mode = 'lines'
) %>%
add_trace(
y = ~lowess(CASOS, f = 7),
name = 'LOWESS 1/10', mode = 'lines'
) %>%
add_trace(
y = ~lowess(CASOS, f = 14),
name = 'LOWESS 1/20', mode = 'lines'
)
a <- forecast::ses(confirmados$CASOS)
plot_ly(
data = confirmados, x = ~Fecha
) %>%
add_trace(
y = ~CASOS,
name = 'Reales', mode = 'markers'
) %>%
add_trace(
y = ~loess(CASOS ~ Fecha, confirmados),
name = 'LOWESS 1/5', mode = 'lines'
) %>%
add_trace(
y = ~lowess(CASOS, f = 7),
name = 'LOWESS 1/10', mode = 'lines'
) %>%
add_trace(
y = ~lowess(CASOS, f = 14),
name = 'LOWESS 1/20', mode = 'lines'
)
a <- forecast::ses(confirmados$CASOS)
plot_ly(
data = confirmados, x = ~Fecha
) %>%
add_trace(
y = ~CASOS,
name = 'Reales', mode = 'markers'
) %>%
add_trace(
y = loess(CASOS ~ Fecha, confirmados),
name = 'LOWESS 1/5', mode = 'lines'
) %>%
add_trace(
y = ~lowess(CASOS, f = 7),
name = 'LOWESS 1/10', mode = 'lines'
) %>%
add_trace(
y = ~lowess(CASOS, f = 14),
name = 'LOWESS 1/20', mode = 'lines'
)
a <- forecast::ses(confirmados$CASOS)
plot_ly(
data = confirmados, x = ~Fecha
) %>%
add_trace(
y = ~CASOS,
name = 'Reales', mode = 'markers'
) %>%
add_trace(
y = ~lowess(CASOS, f = 0.1),
name = 'LOWESS 1/5', mode = 'lines'
) %>%
add_trace(
y = ~lowess(CASOS, f = 7),
name = 'LOWESS 1/10', mode = 'lines'
) %>%
add_trace(
y = ~lowess(CASOS, f = 14),
name = 'LOWESS 1/20', mode = 'lines'
)
a <- forecast::ses(confirmados$CASOS)
plot_ly(
data = confirmados, x = ~Fecha
) %>%
add_trace(
y = ~CASOS,
name = 'Reales', mode = 'markers'
) %>%
add_trace(
y = lowess(confirmados$CASOS, f = 0.1),
name = 'LOWESS 1/5', mode = 'lines'
) %>%
add_trace(
y = ~lowess(CASOS, f = 7),
name = 'LOWESS 1/10', mode = 'lines'
) %>%
add_trace(
y = ~lowess(CASOS, f = 14),
name = 'LOWESS 1/20', mode = 'lines'
)
a <- forecast::ses(confirmados$CASOS)
plot_ly(
data = confirmados, x = ~Fecha
) %>%
add_trace(
y = ~CASOS,
name = 'Reales', mode = 'markers'
) %>%
add_trace(
y = lowess(confirmados$CASOS, f = 0.00000000001),
name = 'LOWESS 1/5', mode = 'lines'
) %>%
add_trace(
y = ~lowess(CASOS, f = 7),
name = 'LOWESS 1/10', mode = 'lines'
) %>%
add_trace(
y = ~lowess(CASOS, f = 14),
name = 'LOWESS 1/20', mode = 'lines'
)
a <- lowess(confirmados$CASOS, f = 1/5)
a
diff(a)
a <- forecast::ses(confirmados$CASOS)
plot_ly(
data = confirmados, x = ~Fecha
) %>%
add_trace(
y = ~CASOS,
name = 'Reales', mode = 'markers'
) %>%
add_trace(
y = lowess(confirmados$CASOS, f = 1/5)$y,
name = 'LOWESS 1/5', mode = 'lines'
) %>%
add_trace(
y = ~lowess(CASOS, f = 7)$y,
name = 'LOWESS 1/10', mode = 'lines'
) %>%
add_trace(
y = ~lowess(CASOS, f = 14)$y,
name = 'LOWESS 1/20', mode = 'lines'
)
a <- forecast::ses(confirmados$CASOS)
plot_ly(
data = confirmados, x = ~Fecha
) %>%
add_trace(
y = ~CASOS,
name = 'Reales', mode = 'markers'
) %>%
add_trace(
y = ~lowess(CASOS, f = 1/5)$y,
name = 'LOWESS 1/5', mode = 'lines'
) %>%
add_trace(
y = ~lowess(CASOS, f = 1/10)$y,
name = 'LOWESS 1/10', mode = 'lines'
) %>%
add_trace(
y = ~lowess(CASOS, f = 1/20)$y,
name = 'LOWESS 1/20', mode = 'lines'
)
library("tidyverse")
library("plotly")
download.file(
"https://raw.githubusercontent.com/dogomoreno/Covid19-Sonora-Municipios/master/Bases/Casosdiarios.csv",
destfile = "Casosdiarios.csv"
)
confirmados <- read.csv("Casosdiarios.csv") %>%
select(Fecha, CASOS) %>%
mutate(Fecha=as.Date(Fecha)) %>%
group_by(Fecha) %>%
summarise(CASOS=sum(CASOS)) %>%
mutate(CASOS = CASOS - lag(CASOS))
plot_ly(
data = confirmados,
x = ~Fecha,
y = ~CASOS
)
confirmados <- confirmados %>%
mutate(
ma.3 = zoo::rollmean(CASOS, 3, align = "center", fill = NA),
ma.7 = zoo::rollmean(CASOS, 7, align = "center", fill = NA),
ma.14 = zoo::rollmean(CASOS, 14, align = "center", fill = NA)
)
plot_ly(
data = confirmados, x = ~Fecha
) %>%
add_trace(
y = ~CASOS,
name = 'Reales', mode = 'markers'
) %>%
add_trace(
y = ~ma.3,
name = 'MA 3 días', mode = 'lines'
) %>%
add_trace(
y = ~ma.7,
name = 'MA 7 días', mode = 'lines'
) %>%
add_trace(
y = ~ma.14,
name = 'MA 14 días', mode = 'lines'
)
confirmados <- confirmados %>%
mutate(
mm.3 = zoo::rollmedian(CASOS, 3, align = "center", fill = NA),
mm.7 = zoo::rollmedian(CASOS, 7, align = "center", fill = NA),
mm.14 = zoo::rollmedian(CASOS, 14, align = "center", fill = NA)
)
plot_ly(
data = confirmados, x = ~Fecha
) %>%
add_trace(
y = ~CASOS,
name = 'Reales', mode = 'markers'
) %>%
add_trace(
y = ~mm.3,
name = 'MM 3 días', mode = 'lines'
) %>%
add_trace(
y = ~mm.7,
name = 'MM 7 días', mode = 'lines'
) %>%
add_trace(
y = ~mm.14,
name = 'MM 14 días', mode = 'lines'
)
?smooth
?lowess
plot_ly(
data = confirmados, x = ~Fecha
) %>%
add_trace(
y = ~CASOS,
name = 'Reales', mode = 'markers'
) %>%
add_trace(
y = ~lowess(CASOS, f = 1/5)$y,
name = 'LOWESS 1/5', mode = 'lines'
) %>%
add_trace(
y = ~lowess(CASOS, f = 1/10)$y,
name = 'LOWESS 1/10', mode = 'lines'
) %>%
add_trace(
y = ~lowess(CASOS, f = 1/20)$y,
name = 'LOWESS 1/20', mode = 'lines'
)
confirmados <- confirmados %>%
mutate(
lowess.5 = lowess(CASOS, f= 1/5)$y,
lowess.10 = lowess(CASOS, f=1/10)$y,
lowess.20 = lowess(CASOS, f=1/20)$y
)
plot_ly(
data = confirmados, x = ~Fecha
) %>%
add_trace(
y = ~CASOS,
name = 'Reales', mode = 'markers'
) %>%
add_trace(
y = ~lowess(CASOS, f = 1/5)$y,
name = 'LOWESS 1/5', mode = 'lines'
) %>%
add_trace(
y = ~lowess(CASOS, f = 1/10)$y,
name = 'LOWESS 1/10', mode = 'lines'
) %>%
add_trace(
y = ~lowess(CASOS, f = 1/20)$y,
name = 'LOWESS 1/20', mode = 'lines'
)
confirmados <- confirmados %>%
mutate(
lowess.5 = lowess(CASOS, f= 1/5)$y,
lowess.10 = lowess(CASOS, f=1/10)$y,
lowess.20 = lowess(CASOS, f=1/20)$y
)
plot_ly(
data = confirmados, x = ~Fecha
) %>%
add_trace(
y = ~CASOS,
name = 'Reales', mode = 'markers'
) %>%
add_trace(
y = ~lowess.5,
name = 'LOWESS 1/5', mode = 'lines'
) %>%
add_trace(
y = ~lowess.10,
name = 'LOWESS 1/10', mode = 'lines'
) %>%
add_trace(
y = ~lowess.20,
name = 'LOWESS 1/20', mode = 'lines'
)
View(confirmados)
confirmados <- confirmados %>%
mutate(
lowess.5 = lowess(CASOS, f= 1)$y,
lowess.10 = lowess(CASOS, f=1/10)$y,
lowess.20 = lowess(CASOS, f=1/2000)$y
)
plot_ly(
data = confirmados, x = ~Fecha
) %>%
add_trace(
y = ~CASOS,
name = 'Reales', mode = 'markers'
) %>%
add_trace(
y = ~lowess.5,
name = 'LOWESS 1/5', mode = 'lines'
) %>%
add_trace(
y = ~lowess.10,
name = 'LOWESS 1/10', mode = 'lines'
) %>%
add_trace(
y = ~lowess.20,
name = 'LOWESS 1/20', mode = 'lines'
)
confirmados <- confirmados %>%
mutate(
lowess.5 = lowess(CASOS, f= 3/4)$y,
lowess.10 = lowess(CASOS, f=1/10)$y,
lowess.20 = lowess(CASOS, f=1/2000)$y
)
plot_ly(
data = confirmados, x = ~Fecha
) %>%
add_trace(
y = ~CASOS,
name = 'Reales', mode = 'markers'
) %>%
add_trace(
y = ~lowess.5,
name = 'LOWESS 1/5', mode = 'lines'
) %>%
add_trace(
y = ~lowess.10,
name = 'LOWESS 1/10', mode = 'lines'
) %>%
add_trace(
y = ~lowess.20,
name = 'LOWESS 1/20', mode = 'lines'
)
confirmados <- confirmados %>%
mutate(
lowess.5 = lowess(CASOS, f= 1/2)$y,
lowess.10 = lowess(CASOS, f=1/10)$y,
lowess.20 = lowess(CASOS, f=1/2000)$y
)
plot_ly(
data = confirmados, x = ~Fecha
) %>%
add_trace(
y = ~CASOS,
name = 'Reales', mode = 'markers'
) %>%
add_trace(
y = ~lowess.5,
name = 'LOWESS 1/5', mode = 'lines'
) %>%
add_trace(
y = ~lowess.10,
name = 'LOWESS 1/10', mode = 'lines'
) %>%
add_trace(
y = ~lowess.20,
name = 'LOWESS 1/20', mode = 'lines'
)
confirmados <- confirmados %>%
mutate(
lowess.5 = lowess(CASOS, f= 1/5)$y,
lowess.10 = lowess(CASOS, f=1/10)$y,
lowess.20 = lowess(CASOS, f=1/20)$y
)
plot_ly(
data = confirmados, x = ~Fecha
) %>%
add_trace(
y = ~CASOS,
name = 'Reales', mode = 'markers'
) %>%
add_trace(
y = ~lowess.5,
name = 'LOWESS 1/5', mode = 'lines'
) %>%
add_trace(
y = ~lowess.10,
name = 'LOWESS 1/10', mode = 'lines'
) %>%
add_trace(
y = ~lowess.20,
name = 'LOWESS 1/20', mode = 'lines'
)
