install.packages("tidyverse")
# 1. setwd() y getwd()
# 2. Archivos con dirección relativa y absoluta
getwd()
setwd("/Users/juliowaissman/Documents/cursos/IC-MCD-Unison/2021-2/ing-caract/ejemplos/integracion/R")
getwd()
# En R es por convención usar . como parte
# de los nombres de variables y funciones
if (!dir.exists("../data/")){
dir.create("../data")
}
covid.url <- "http://datosabiertos.salud.gob.mx/gobmx/salud/datos_abiertos/datos_abiertos_covid19.zip"
covid.archivo <- "../data/datos_abiertos_covid19.zip"
covid.dic.conceptos.url <- "http://epidemiologia.salud.gob.mx/gobmx/salud/datos_abiertos/diccionario_datos_covid19.zip"
covid.dic.conceptos.archivo <- "../data/diccionario.zip"
# ¿No suena parecido? Hagamos una función
if(!file.exists(covid.archivo)){
download.file(covid.url, destfile = covid.archivo)
unzip(covid.archivo, exdir = "../data/")
download.file(covid.dic.conceptos.url, destfile = covid.dic.conceptos.archivo)
unzip(covid.dic.conceptos.archivo, exdir = "../data/")
fecha.descarga <- date()
}
info <- data.frame(
concepto = c('Fecha de descarga', 'URL', 'Archivo', 'Diccionario URL', 'Diccionario'),
valor = c(fecha.descarga, covid.url, covid.archivo, covid.dic.conceptos.url, covid.dic.conceptos.archivo)
)
echa.descarga <- date()
fecha.descarga <- date()
info <- data.frame(
concepto = c('Fecha de descarga', 'URL', 'Archivo', 'Diccionario URL', 'Diccionario'),
valor = c(fecha.descarga, covid.url, covid.archivo, covid.dic.conceptos.url, covid.dic.conceptos.archivo)
)
View(info)
write.csv(x = info, file = "../data/info.txt")
# ¿Donde se encuentra en estos momentos la estación espacial?
response <- httr::GET("http://api.open-notify.org/iss-now.json")
View(response)
print(paste("Status:", response$status_code))
print(paste("Contenido:", httr::content(response, as = 'text')))
# Vamos a preguntar algo que no existe en la API
response <- httr::GET("http://api.open-notify.org/iss-pass")
print(paste("Status:", response$status_code))
print(paste("Contenido:", httr::content(response, as = 'text')))
# Vamos a preguntar algo que si existe pero lo vamos apreguntar mal
response <- httr::GET("http://api.open-notify.org/iss-pass.json")
print(paste("Status:", response$status_code))
print(paste("Contenido:", httr::content(response, as = 'text')))
parametros = list(
lat = 29.08919,
lon = -110.96133
)
par = c(29.08919, -110.96133)
par
par[1‚]
par[1]
par[2]
parametros
View(parametros)
parametros = list(
lat = 29.08919,
lon = -110.96133
)
response <- httr::GET("http://api.open-notify.org/iss-pass.json", query = parametros)
print(paste("Status:", response$status_code))
contenido <- httr::content(response, as = 'parsed')
View(contenido)
